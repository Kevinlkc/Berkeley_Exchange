"0","data <-  read.table(""karolinska.txt"", header = T)"
"0","Y <- as.numeric(data$YearsSurvivingAfterDiagnosis)"
"0","X <- as.numeric(data$HighVolTreatHosp)"
"0","IV <- as.numeric(data$HighVolDiagHosp)"
"0","covariates <- as.matrix(data$FromRuralArea, data$Male,data$AgeAtDiagnosis, data$YearOfDiagnosis)"
"0","# With Covariates (2SLS)"
"0","# Stage 1"
"0","model1 <- lm(X~IV+covariates)"
"0","# Stage 2"
"0","model <- lm(Y~model1$fitted.values + covariates)"
"0","print(paste(""The Average Causal Effect (Estimated by IV, with covariates) is "", model$coefficients['model1$fitted.values'], sep = """"))"
"1","[1]"
"1"," ""The Average Causal Effect (Estimated by IV, with covariates) is 0.0919170000678104"""
"1","
"
